<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <link rel="stylesheet" href="index.css">
   <link rel="stylesheet" href="header/header.css">
   <script src="sideCalendar/sideCalendar.js"></script>

   <script src="taskCompleted/taskCompleted.js"></script>

   <script src="displayTasks/displayTasks.js"></script>
   <link rel="stylesheet" href="displayTasks/displayTasks.css">

   <!--taskbox script and stylesheet -->
   <link rel="stylesheet" href="taskBox\taskbox.css" />
   <script src="taskBox\send_task.js"></script>
</head>

<body>
   <header class="header">
      <img src="header/assets/Logo.svg" alt="team logo" class="logo">

      <div class="header-content">

         <div class="stat-container">
            <div class="stat">
               <img src="./header/assets/Fire.svg" alt="Streak fire">
               <div class="stat-text">
                  <p class="header-stat" id="streak-days">31 days streak</p>
                  <p class="stat-caption" id="streak-caption">You are on fire!</p>
               </div>
            </div>

            <div class="stat">
               <p id="check">âœ…</p>
               <div class="stat-text">
                  <p class="header-stat" id="tasks-completed">20 tasks completed</p>
                  <p class="stat-caption" id="tasks-to-go">7 tasks to go</p>
               </div>
            </div>
         </div>

         <div class="menu">
            <a href="#">Support</a>
            <a href="#">Settings</a>
            <img src="header/assets/Account.svg" alt="Person icon" class="profile-icon">
         </div>

      </div>

   </header>

   <main>
      <side-calendar></side-calendar>
      <article>
         <section>
            <div id="task-container" class="hidden">
               <h1>Today's Tasks</h1>
               <table id="task-table"></table>
            </div>
            <completed-statistics></completed-statistics>
         </section>

         <!--text box on the bottom, with the send button-->
         <div class="taskbox">
            <textarea id="taskInput" placeholder="What would you like to do today?"></textarea>
            <button class="add-task" type="button" id="sendTask">
               <img src="taskBox/sendTask.png" alt="Send" />
            </button>
         </div>
      </article>
   </main>

   <!-- 
      Commented because we will not use this exact code in this table format
      but we will use this route for the task list
   -->
   <table id="tasksTable" border="1">
      <!-- <thead>
          <tr>
              <th>Title</th>
              <th>Due Date</th>
              <th>Completed</th>
          </tr>
      </thead> -->
      <tbody>
      </tbody>
   </table>

   <!-- <script>

      function fetchTasks(date) {
         console.log(`/tasks?date=${date}`)

         fetch(`/tasks?date=${date}`)
            .then(response => response.json())
            .then(data => {
               const tableBody = document.querySelector('#tasksTable tbody');
               tableBody.innerHTML = '';
               data.forEach(task => {
                  const row = document.createElement('tr');
                  row.innerHTML = `
                         <td>${task.title}</td>
                         <td>${task.due_date}</td>
                         <td>${task.completed != 0}</td>
                     `;

                  //  Task completed
                  if (task.completed != 0) {
                     row.innerHTML += `
                           <td><button class="row-button disabled" disabled><img src="./displayTasks/Check.png" /></button></td>
                           <td><button class="row-button disabled" disabled><img src="./displayTasks/TrashSimple.png" /></button></td>
                        `
                     // Task not completed
                  } else {
                     row.innerHTML += `
                           <td><button class="row-button"><img src="./displayTasks/Check.png" /></button></td>
                           <td><button class="row-button"><img src="./displayTasks/TrashSimple.png" /></button></td>
                        `
                  }

                  tableBody.appendChild(row);
               });
            })
            .catch(error => console.error('Error fetching data:', error));
      }
      let currentDate = new Date().toISOString().slice(0, 10);
      console.log(`Current date: ${currentDate}`)
      fetchTasks(currentDate)
   </script> -->
</body>

</html>